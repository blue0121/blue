<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:core="http://blue.com/schema/core"
       xmlns:kafka="http://blue.com/schema/kafka"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
       http://blue.com/schema/core http://blue.com/schema/core.xsd
       http://blue.com/schema/kafka http://blue.com/schema/kafka.xsd">
	
	<core:task-executor id="taskExecutor" core-pool-size="10" max-pool-size="1000" queue-capacity="10000" keep-alive-seconds="60" />
	
	<util:properties id="kafkaProducerConfig">
		<prop key="bootstrap.servers">localhost:9092</prop>
		<prop key="key.serializer">org.apache.kafka.common.serialization.StringSerializer</prop>
		<prop key="value.serializer">blue.internal.kafka.codec.FastjsonSerializer</prop>
	</util:properties>
	
	<util:properties id="kafkaConsumerConfig">
		<prop key="bootstrap.servers">localhost:9092</prop>
		<prop key="group.id">test</prop>
		<prop key="key.deserializer">org.apache.kafka.common.serialization.StringDeserializer</prop>
		<prop key="value.deserializer">blue.internal.kafka.codec.FastjsonDeserializer</prop>
		<prop key="auto.offset.reset">earliest</prop>
		<prop key="max.poll.records">500</prop>
		<prop key="session.timeout.ms">10000</prop>
		<prop key="heartbeat.interval.ms">3000</prop>
	</util:properties>
	
	<bean id="producerListener" class="test.kafka.listener.DefaultProducerListener" />
	<bean id="kafkaListener" class="test.kafka.listener.DefaultKafkaListener" />
	
	<kafka:producer id="kafkaProducer" ref-config="kafkaProducerConfig" ref-default-listener="producerListener" />
	
	<kafka:memory-offset-manager id="kafkaOffsetManager" />
	
	<kafka:listener-container id="kafkaListenerContainer" ref-config="kafkaConsumerConfig" ref-task-executor="taskExecutor"
							ref-offset-manager="kafkaOffsetManager">
		<kafka:listener topic="test" ref-listener="kafkaListener" group="test" />
	</kafka:listener-container>

</beans>